# Frontend Code - DeepSeek RAG Project

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/index.html
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeepSeek RAG Frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/package.json
{
  "name": "deepseek-rag-frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "18.2.0",
    "react-dom": "18.2.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^5.1.1",
    "vite": "^7.2.4"
  }
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/package-lock.json
{
  "name": "deepseek-rag-frontend",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "deepseek-rag-frontend",
      "version": "0.1.0",
      "dependencies": {
        "react": "18.2.0",
        "react-dom": "18.2.0"
      },
      "devDependencies": {
        "@vitejs/plugin-react": "^5.1.1",
        "vite": "^7.2.4"
      }
    }
    // ... (package-lock.json content continues with all dependencies)
  }
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/main.jsx
import React from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'
import './styles.css'

createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
)

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/App.jsx
import React, { useState, useEffect } from 'react'
import SessionHistory from './SessionHistory'
import UploadManager from './UploadManager'
import './App.css'

export default function App() {
  const [messages, setMessages] = useState([])
  const [input, setInput] = useState('')
  const [loading, setLoading] = useState(false)
  const [files, setFiles] = useState([])
  const [uploadProgress, setUploadProgress] = useState(0)
  const [uploading, setUploading] = useState(false)
  const [activeTab, setActiveTab] = useState('chat') // 'chat', 'files', 'history'
  const [currentSession, setCurrentSession] = useState(null)
  const [showSessionHistory, setShowSessionHistory] = useState(false)

  // åŠ è½½æ–‡ä»¶åˆ—è¡¨
  useEffect(() => {
    if (activeTab === 'files') {
      loadFiles()
    }
  }, [activeTab])

  const loadFiles = async () => {
    try {
      const resp = await fetch('/api/files')
      if (resp.ok) {
        const fileList = await resp.json()
        setFiles(fileList)
      }
    } catch (e) {
      console.error('åŠ è½½æ–‡ä»¶åˆ—è¡¨å¤±è´¥:', e)
    }
  }

  // åŠ è½½ä¼šè¯æ¶ˆæ¯
  const loadSessionMessages = async (session) => {
    if (!session) return

    try {
      const resp = await fetch(`/api/sessions/${session.id}/messages`)
      if (resp.ok) {
        const sessionMessages = await resp.json()
        setMessages(sessionMessages.map(msg => ({
          role: msg.role,
          content: msg.content,
          timestamp: msg.timestamp
        })))
      }
    } catch (e) {
      console.error('åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥:', e)
    }
  }

  // é€‰æ‹©ä¼šè¯
  const handleSessionSelect = async (session) => {
    setCurrentSession(session)
    if (session) {
      await loadSessionMessages(session)
    } else {
      setMessages([])
    }
  }

  // å‘é€èŠå¤©æ¶ˆæ¯
  async function send() {
    if (!input.trim()) return
    const userMsg = { role: 'user', content: input }
    setMessages(m => [...m, userMsg])
    setInput('')
    setLoading(true)

    try {
      const resp = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          input,
          session_id: currentSession?.id
        })
      })

      if (!resp.ok) {
        throw new Error(`HTTP error! status: ${resp.status}`)
      }

      const data = await resp.json()

      // æ›´æ–°å½“å‰ä¼šè¯IDï¼ˆå¦‚æœæ˜¯æ–°ä¼šè¯ï¼‰
      if (data.session_id && (!currentSession || currentSession.id !== data.session_id)) {
        setCurrentSession({ id: data.session_id })
      }

      const botMsg = { role: 'assistant', content: data.output }
      setMessages(m => [...m, botMsg])
    } catch (e) {
      console.error('APIè°ƒç”¨é”™è¯¯:', e)
      setMessages(m => [...m, {
        role: 'assistant',
        content: 'è°ƒç”¨åç«¯å¤±è´¥ï¼š' + e.message + '\nè¯·æ£€æŸ¥ï¼š\n1. åç«¯æœåŠ¡å™¨æ˜¯å¦åœ¨ http://localhost:8000 è¿è¡Œ\n2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸'
      }])
    } finally {
      setLoading(false)
    }
  }

  // ä¸Šä¼ æ–‡ä»¶
  const handleFileUpload = async (event) => {
    const file = event.target.files[0]
    if (!file) return

    setUploading(true)
    setUploadProgress(0)

    try {
      const formData = new FormData()
      formData.append('file', file)

      // æ¨¡æ‹Ÿè¿›åº¦æ¡
      const progressInterval = setInterval(() => {
        setUploadProgress(prev => {
          if (prev >= 90) {
            clearInterval(progressInterval)
            return prev
          }
          return prev + 10
        })
      }, 100)

      const resp = await fetch('/api/upload', {
        method: 'POST',
        body: formData
      })

      clearInterval(progressInterval)
      setUploadProgress(100)

      if (resp.ok) {
        const result = await resp.json()
        alert(`æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼\næ–‡ä»¶å: ${result.filename}\nå¤§å°: ${result.size} bytes`)
        loadFiles() // é‡æ–°åŠ è½½æ–‡ä»¶åˆ—è¡¨
      } else {
        const error = await resp.json()
        alert('ä¸Šä¼ å¤±è´¥: ' + error.detail)
      }
    } catch (e) {
      console.error('ä¸Šä¼ é”™è¯¯:', e)
      alert('ä¸Šä¼ å¤±è´¥: ' + e.message)
    } finally {
      setUploading(false)
      setTimeout(() => setUploadProgress(0), 1000)
    }
  }

  // ä¸‹è½½æ–‡ä»¶
  const downloadFile = (filename) => {
    window.open(`/api/download/${filename}`, '_blank')
  }

  // åˆ é™¤æ–‡ä»¶
  const deleteFile = async (filename) => {
    if (!confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ä»¶ "${filename}" å—ï¼Ÿ`)) return

    try {
      const resp = await fetch(`/api/files/${filename}`, {
        method: 'DELETE'
      })

      if (resp.ok) {
        alert('æ–‡ä»¶åˆ é™¤æˆåŠŸ')
        loadFiles() // é‡æ–°åŠ è½½æ–‡ä»¶åˆ—è¡¨
      } else {
        const error = await resp.json()
        alert('åˆ é™¤å¤±è´¥: ' + error.detail)
      }
    } catch (e) {
      console.error('åˆ é™¤é”™è¯¯:', e)
      alert('åˆ é™¤å¤±è´¥: ' + e.message)
    }
  }

  // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
  const formatFileSize = (bytes) => {
    if (bytes === 0) return '0 Bytes'
    const k = 1024
    const sizes = ['Bytes', 'KB', 'MB', 'GB']
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
  }

  // æ¸…ç©ºèŠå¤©è®°å½•
  const clearChat = () => {
    setMessages([])
  }

  return (
    <div className="container">
      <aside className="sidebar">
        <h2>ğŸ¢ DeepSeek RAG</h2>
        <div className="nav-buttons">
          <button
            className={`nav-btn ${activeTab === 'chat' ? 'active' : ''}`}
            onClick={() => setActiveTab('chat')}
          >
            ğŸ’¬ èŠå¤©
          </button>
          <button
            className={`nav-btn ${activeTab === 'files' ? 'active' : ''}`}
            onClick={() => setActiveTab('files')}
          >
            ğŸ“ æ–‡ä»¶ç®¡ç†
          </button>
          <button
            className={`nav-btn ${activeTab === 'history' ? 'active' : ''}`}
            onClick={() => setActiveTab('history')}
          >
            ğŸ“š ä¼šè¯å†å²
          </button>
        </div>

        {activeTab === 'chat' && (
          <div className="sidebar-info">
            <p>ä¼ä¸šçŸ¥è¯†åº“åŠ©æ‰‹</p>
            <div className="session-info">
              {currentSession ? (
                <p className="current-session">å½“å‰ä¼šè¯: {currentSession.id.slice(0, 8)}...</p>
              ) : (
                <p className="new-session">æ–°ä¼šè¯</p>
              )}
            </div>
            <button className="clear-btn" onClick={clearChat}>
              ğŸ§¹ æ¸…ç©ºå½“å‰å¯¹è¯
            </button>
            <button className="new-session-btn" onClick={() => {
              setCurrentSession(null)
              setMessages([])
            }}>
              â• æ–°å»ºä¼šè¯
            </button>
          </div>
        )}

        {activeTab === 'files' && (
          <div className="sidebar-info">
            <p>çŸ¥è¯†åº“æ–‡ä»¶ç®¡ç†</p>
            <p className="small-text">æ”¯æŒ: .txt .md .pdf .docx</p>
          </div>
        )}

        {activeTab === 'history' && (
          <div className="sidebar-info">
            <p>ä¼šè¯å†å²ç®¡ç†</p>
            <p className="small-text">æŸ¥çœ‹å’Œç®¡ç†å†å²å¯¹è¯</p>
          </div>
        )}
      </aside>

      <main className="main">
        {activeTab === 'chat' ? (
          /* èŠå¤©ç•Œé¢ */
          <div className="chat-container">
            <div className="chat">
              {messages.length === 0 && (
                <div className="welcome-message">
                  <h3>ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ä¼ä¸šçŸ¥è¯†åº“åŠ©æ‰‹</h3>
                  <p>æˆ‘å¯ä»¥å¸®æ‚¨æŸ¥è¯¢å…¬å¸å†…éƒ¨æ–‡æ¡£ï¼Œå›ç­”ç›¸å…³é—®é¢˜ã€‚</p>
                </div>
              )}
              {messages.map((m, i) => (
                <div key={i} className={`message ${m.role}`}>
                  <div className="bubble">{m.content}</div>
                </div>
              ))}
              {loading && (
                <div className="message assistant">
                  <div className="bubble loading">ğŸ¤” æ€è€ƒä¸­...</div>
                </div>
              )}
            </div>

            <div className="input-area">
              <input
                value={input}
                onChange={e => setInput(e.target.value)}
                placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..."
                disabled={loading}
                onKeyDown={e => e.key === 'Enter' && send()}
              />
              <button onClick={send} disabled={loading}>
                {loading ? 'â³' : 'ğŸš€'}
              </button>
            </div>
          </div>
        ) : activeTab === 'files' ? (
          /* æ–‡ä»¶ç®¡ç†ç•Œé¢ */
          <div className="files-container">
            <UploadManager onUploadComplete={loadFiles} />
            <div className="files-section">
              <h3>ğŸ“š çŸ¥è¯†åº“æ–‡ä»¶åˆ—è¡¨</h3>
              {files.length === 0 ? (
                <div className="empty-files">
                  <p>ğŸ“‚ çŸ¥è¯†åº“ä¸­æš‚æ— æ–‡ä»¶</p>
                  <p className="small-text">ä¸Šä¼ ä¸€äº›æ–‡æ¡£å¼€å§‹ä½¿ç”¨å§ï¼</p>
                </div>
              ) : (
                <div className="files-grid">
                  {files.map((file, index) => (
                    <div key={index} className="file-card">
                      <div className="file-info">
                        <div className="file-icon">
                          {file.type === 'pdf' ? 'ğŸ“„' :
                           file.type === 'docx' || file.type === 'doc' ? 'ğŸ“' :
                           file.type === 'md' ? 'ğŸ“‹' : 'ğŸ“ƒ'}
                        </div>
                        <div className="file-details">
                          <h4 className="file-name">{file.name}</h4>
                          <p className="file-size">{formatFileSize(file.size)}</p>
                        </div>
                      </div>
                      <div className="file-actions">
                        <button
                          className="download-btn"
                          onClick={() => downloadFile(file.name)}
                          title="ä¸‹è½½æ–‡ä»¶"
                        >
                          â¬‡ï¸
                        </button>
                        <button
                          className="delete-btn"
                          onClick={() => deleteFile(file.name)}
                          title="åˆ é™¤æ–‡ä»¶"
                        >
                          ğŸ—‘ï¸
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>
        ) : (
          /* ä¼šè¯å†å²ç•Œé¢ */
          <div className="history-container">
            <SessionHistory
              onSessionSelect={handleSessionSelect}
              currentSessionId={currentSession?.id}
              onNewSession={(session) => {
                setCurrentSession(session)
                setActiveTab('chat')
              }}
            />
          </div>
        )}
      </main>

      <style jsx>{`
        .history-container {
          height: 100%;
          padding: 20px;
        }

        .session-info {
          margin: 8px 0;
        }

        .current-session {
          font-size: 12px;
          color: #007bff;
          background: #e3f2fd;
          padding: 4px 8px;
          border-radius: 4px;
          margin: 4px 0;
        }

        .new-session {
          font-size: 12px;
          color: #28a745;
          background: #d4edda;
          padding: 4px 8px;
          border-radius: 4px;
          margin: 4px 0;
        }

        .new-session-btn {
          background: #28a745;
          color: white;
          border: none;
          padding: 8px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          margin-top: 8px;
          width: 100%;
        }

        .new-session-btn:hover {
          background: #218838;
        }

        /* ç¡®ä¿å…¶ä»–æ ·å¼ä¿æŒä¸å˜ */
        .container {
          display: flex;
          height: 100vh;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }

        .sidebar {
          width: 280px;
          background: #2c3e50;
          color: white;
          padding: 20px;
          display: flex;
          flex-direction: column;
        }

        .sidebar h2 {
          margin: 0 0 30px 0;
          font-size: 24px;
        }

        .nav-buttons {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-bottom: 30px;
        }

        .nav-btn {
          background: none;
          border: none;
          color: white;
          padding: 12px 16px;
          border-radius: 6px;
          cursor: pointer;
          text-align: left;
          font-size: 14px;
          transition: background 0.2s;
        }

        .nav-btn:hover {
          background: rgba(255, 255, 255, 0.1);
        }

        .nav-btn.active {
          background: #3498db;
        }

        .sidebar-info {
          margin-top: auto;
          font-size: 14px;
          opacity: 0.8;
        }

        .sidebar-info p {
          margin: 0 0 12px 0;
        }

        .small-text {
          font-size: 12px;
          opacity: 0.7;
        }

        .clear-btn {
          background: #e74c3c;
          color: white;
          border: none;
          padding: 8px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          width: 100%;
          margin-top: 8px;
        }

        .clear-btn:hover {
          background: #c0392b;
        }

        .main {
          flex: 1;
          display: flex;
          flex-direction: column;
        }

        .chat-container {
          height: 100%;
          display: flex;
          flex-direction: column;
        }

        .chat {
          flex: 1;
          padding: 20px;
          overflow-y: auto;
          background: #f8f9fa;
        }

        .welcome-message {
          text-align: center;
          padding: 60px 20px;
          color: #666;
        }

        .welcome-message h3 {
          margin: 0 0 16px 0;
          color: #333;
        }

        .message {
          margin-bottom: 20px;
          display: flex;
        }

        .message.user {
          justify-content: flex-end;
        }

        .message.assistant {
          justify-content: flex-start;
        }

        .bubble {
          max-width: 70%;
          padding: 12px 16px;
          border-radius: 18px;
          line-height: 1.4;
          word-wrap: break-word;
        }

        .message.user .bubble {
          background: #3498db;
          color: white;
          border-bottom-right-radius: 4px;
        }

        .message.assistant .bubble {
          background: white;
          color: #333;
          border: 1px solid #e9ecef;
          border-bottom-left-radius: 4px;
        }

        .bubble.loading {
          background: #e9ecef;
          color: #666;
        }

        .input-area {
          padding: 20px;
          background: white;
          border-top: 1px solid #e9ecef;
          display: flex;
          gap: 12px;
        }

        .input-area input {
          flex: 1;
          padding: 12px 16px;
          border: 1px solid #ddd;
          border-radius: 24px;
          font-size: 14px;
          outline: none;
        }

        .input-area input:focus {
          border-color: #3498db;
        }

        .input-area button {
          background: #3498db;
          color: white;
          border: none;
          padding: 12px 20px;
          border-radius: 24px;
          cursor: pointer;
          font-size: 16px;
        }

        .input-area button:hover {
          background: #2980b9;
        }

        .input-area button:disabled {
          background: #bdc3c7;
          cursor: not-allowed;
        }

        .files-container {
          height: 100%;
          padding: 20px;
          overflow-y: auto;
        }

        .files-section {
          margin-top: 20px;
        }

        .files-section h3 {
          margin: 0 0 16px 0;
          color: #333;
        }

        .empty-files {
          text-align: center;
          padding: 60px 20px;
          color: #666;
        }

        .files-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 16px;
        }

        .file-card {
          background: white;
          border: 1px solid #e9ecef;
          border-radius: 8px;
          padding: 16px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .file-info {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .file-icon {
          font-size: 24px;
        }

        .file-name {
          margin: 0 0 4px 0;
          font-size: 14px;
          font-weight: 500;
        }

        .file-size {
          margin: 0;
          font-size: 12px;
          color: #666;
        }

        .file-actions {
          display: flex;
          gap: 8px;
        }

        .download-btn, .delete-btn {
          background: none;
          border: none;
          cursor: pointer;
          padding: 8px;
          border-radius: 4px;
          font-size: 16px;
        }

        .download-btn:hover {
          background: #e3f2fd;
        }

        .delete-btn:hover {
          background: #ffebee;
        }
      `}</style>
    </div>
  )
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/SessionHistory.jsx
import React, { useState, useEffect } from 'react'

export default function SessionHistory({ onSessionSelect, currentSessionId, onNewSession }) {
  const [sessions, setSessions] = useState([])
  const [loading, setLoading] = useState(true)
  const [searchQuery, setSearchQuery] = useState('')
  const [showSearch, setShowSearch] = useState(false)
  const [showStats, setShowStats] = useState(false)
  const [stats, setStats] = useState(null)

  // åŠ è½½ä¼šè¯åˆ—è¡¨
  const loadSessions = async () => {
    try {
      setLoading(true)
      const url = searchQuery
        ? `/api/sessions/search?q=${encodeURIComponent(searchQuery)}&limit=20`
        : '/api/sessions?limit=20'

      const resp = await fetch(url)
      if (resp.ok) {
        const sessionList = await resp.json()
        setSessions(sessionList)
      }
    } catch (e) {
      console.error('åŠ è½½ä¼šè¯åˆ—è¡¨å¤±è´¥:', e)
    } finally {
      setLoading(false)
    }
  }

  // åŠ è½½ç»Ÿè®¡ä¿¡æ¯
  const loadStats = async () => {
    try {
      const resp = await fetch('/api/sessions/stats')
      if (resp.ok) {
        const statsData = await resp.json()
        setStats(statsData)
      }
    } catch (e) {
      console.error('åŠ è½½ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', e)
    }
  }

  // åˆ›å»ºæ–°ä¼šè¯
  const createNewSession = async () => {
    try {
      const resp = await fetch('/api/sessions', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({})
      })
      if (resp.ok) {
        const newSession = await resp.json()
        setSessions(prev => [newSession, ...prev])
        onSessionSelect(newSession)
        onNewSession(newSession)
      }
    } catch (e) {
      console.error('åˆ›å»ºä¼šè¯å¤±è´¥:', e)
    }
  }

  // åˆ é™¤ä¼šè¯
  const deleteSession = async (sessionId, e) => {
    e.stopPropagation()

    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¼šè¯å—ï¼Ÿ')) return

    try {
      const resp = await fetch(`/api/sessions/${sessionId}`, {
        method: 'DELETE'
      })
      if (resp.ok) {
        setSessions(prev => prev.filter(s => s.id !== sessionId))
        if (currentSessionId === sessionId) {
          onSessionSelect(null)
        }
      }
    } catch (e) {
      console.error('åˆ é™¤ä¼šè¯å¤±è´¥:', e)
    }
  }

  // æ ¼å¼åŒ–æ—¶é—´
  const formatDate = (dateString) => {
    const date = new Date(dateString)
    const now = new Date()
    const diffMs = now - date
    const diffHours = Math.floor(diffMs / (1000 * 60 * 60))
    const diffDays = Math.floor(diffHours / 24)

    if (diffHours < 1) {
      return 'åˆšåˆš'
    } else if (diffHours < 24) {
      return `${diffHours}å°æ—¶å‰`
    } else if (diffDays < 7) {
      return `${diffDays}å¤©å‰`
    } else {
      return date.toLocaleDateString('zh-CN', {
        month: 'numeric',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      })
    }
  }

  // æ›´æ–°ä¼šè¯æ ‡é¢˜
  const updateSessionTitle = async (sessionId, newTitle) => {
    try {
      const resp = await fetch(`/api/sessions/${sessionId}/title`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title: newTitle })
      })
      if (resp.ok) {
        setSessions(prev => prev.map(s =>
          s.id === sessionId ? { ...s, title: newTitle } : s
        ))
      }
    } catch (e) {
      console.error('æ›´æ–°ä¼šè¯æ ‡é¢˜å¤±è´¥:', e)
    }
  }

  useEffect(() => {
    loadSessions()
    if (showStats) {
      loadStats()
    }
  }, [searchQuery, showStats])

  return (
    <div className="session-history">
      <div className="session-header">
        <h3>ğŸ’¬ ä¼šè¯å†å²</h3>
        <div className="session-actions">
          <button
            className="icon-btn"
            onClick={() => setShowSearch(!showSearch)}
            title={showSearch ? 'éšè—æœç´¢' : 'æœç´¢ä¼šè¯'}
          >
            ğŸ”
          </button>
          <button
            className="icon-btn"
            onClick={() => {
              setShowStats(!showStats)
              if (!showStats) loadStats()
            }}
            title={showStats ? 'éšè—ç»Ÿè®¡' : 'æŸ¥çœ‹ç»Ÿè®¡'}
          >
            ğŸ“Š
          </button>
          <button
            className="new-session-btn"
            onClick={createNewSession}
            title="æ–°å»ºä¼šè¯"
          >
            â• æ–°å»ºä¼šè¯
          </button>
        </div>
      </div>

      {/* æœç´¢æ¡† */}
      {showSearch && (
        <div className="search-section">
          <input
            type="text"
            placeholder="æœç´¢ä¼šè¯..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="search-input"
          />
        </div>
      )}

      {/* ç»Ÿè®¡ä¿¡æ¯ */}
      {showStats && stats && (
        <div className="stats-section">
          <div className="stat-item">
            <span className="stat-label">æ€»ä¼šè¯æ•°:</span>
            <span className="stat-value">{stats.total_sessions}</span>
          </div>
          <div className="stat-item">
            <span className="stat-label">æ€»æ¶ˆæ¯æ•°:</span>
            <span className="stat-value">{stats.total_messages}</span>
          </div>
          <div className="stat-item">
            <span className="stat-label">ä»Šæ—¥ä¼šè¯:</span>
            <span className="stat-value">{stats.today_sessions}</span>
          </div>
        </div>
      )}

      {/* ä¼šè¯åˆ—è¡¨ */}
      <div className="sessions-list">
        {loading ? (
          <div className="loading">åŠ è½½ä¸­...</div>
        ) : sessions.length === 0 ? (
          <div className="empty-sessions">
            <p>ğŸ“ æš‚æ— ä¼šè¯è®°å½•</p>
            <p className="small-text">å¼€å§‹æ‚¨çš„ç¬¬ä¸€æ¬¡å¯¹è¯å§ï¼</p>
          </div>
        ) : (
          sessions.map(session => (
            <div
              key={session.id}
              className={`session-item ${currentSessionId === session.id ? 'active' : ''}`}
              onClick={() => onSessionSelect(session)}
            >
              <div className="session-info">
                <div className="session-title">
                  <input
                    type="text"
                    value={session.title}
                    onChange={(e) => updateSessionTitle(session.id, e.target.value)}
                    onClick={(e) => e.stopPropagation()}
                    className="session-title-input"
                    title="ç‚¹å‡»ç¼–è¾‘æ ‡é¢˜"
                  />
                </div>
                <div className="session-meta">
                  <span className="session-count">{session.message_count} æ¡æ¶ˆæ¯</span>
                  <span className="session-time">{formatDate(session.updated_at)}</span>
                </div>
              </div>
              <button
                className="delete-session-btn"
                onClick={(e) => deleteSession(session.id, e)}
                title="åˆ é™¤ä¼šè¯"
              >
                ğŸ—‘ï¸
              </button>
            </div>
          ))
        )}
      </div>

      <style jsx>{`
        .session-history {
          padding: 16px;
          background: #f8f9fa;
          border-radius: 8px;
          height: 100%;
          display: flex;
          flex-direction: column;
        }

        .session-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .session-header h3 {
          margin: 0;
          color: #333;
        }

        .session-actions {
          display: flex;
          gap: 8px;
        }

        .icon-btn {
          background: none;
          border: none;
          cursor: pointer;
          padding: 8px;
          border-radius: 4px;
          font-size: 16px;
        }

        .icon-btn:hover {
          background: #e9ecef;
        }

        .new-session-btn {
          background: #007bff;
          color: white;
          border: none;
          padding: 8px 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
        }

        .new-session-btn:hover {
          background: #0056b3;
        }

        .search-section {
          margin-bottom: 16px;
        }

        .search-input {
          width: 100%;
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
        }

        .stats-section {
          background: white;
          padding: 12px;
          border-radius: 4px;
          margin-bottom: 16px;
          border: 1px solid #e9ecef;
        }

        .stat-item {
          display: flex;
          justify-content: space-between;
          margin-bottom: 4px;
        }

        .stat-label {
          color: #666;
          font-size: 12px;
        }

        .stat-value {
          font-weight: bold;
          font-size: 12px;
        }

        .sessions-list {
          flex: 1;
          overflow-y: auto;
        }

        .loading, .empty-sessions {
          text-align: center;
          padding: 32px;
          color: #666;
        }

        .session-item {
          background: white;
          border: 1px solid #e9ecef;
          border-radius: 4px;
          padding: 12px;
          margin-bottom: 8px;
          cursor: pointer;
          transition: all 0.2s;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .session-item:hover {
          background: #f8f9fa;
          border-color: #007bff;
        }

        .session-item.active {
          background: #e3f2fd;
          border-color: #007bff;
        }

        .session-info {
          flex: 1;
        }

        .session-title {
          margin-bottom: 4px;
        }

        .session-title-input {
          border: none;
          background: transparent;
          font-weight: 500;
          font-size: 14px;
          width: 100%;
          cursor: text;
        }

        .session-title-input:focus {
          outline: 1px solid #007bff;
          background: white;
          padding: 2px 4px;
          border-radius: 2px;
        }

        .session-meta {
          display: flex;
          gap: 12px;
          font-size: 12px;
          color: #666;
        }

        .delete-session-btn {
          background: none;
          border: none;
          cursor: pointer;
          padding: 4px;
          opacity: 0.6;
          font-size: 14px;
        }

        .delete-session-btn:hover {
          opacity: 1;
          color: #dc3545;
        }

        .small-text {
          font-size: 12px;
          color: #999;
        }
      `}</style>
    </div>
  )
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/UploadManager.jsx
import React, { useState, useEffect } from 'react'

export default function UploadManager({ onUploadComplete }) {
  const [uploadTasks, setUploadTasks] = useState([])
  const [showManager, setShowManager] = useState(false)
  const [dragActive, setDragActive] = useState(false)
  const [stats, setStats] = useState(null)

  // åŠ è½½ä¸Šä¼ ä»»åŠ¡
  const loadUploadTasks = async () => {
    try {
      const resp = await fetch('/api/uploads')
      if (resp.ok) {
        const tasks = await resp.json()
        setUploadTasks(tasks)
      }
    } catch (e) {
      console.error('åŠ è½½ä¸Šä¼ ä»»åŠ¡å¤±è´¥:', e)
    }
  }

  // åŠ è½½ç»Ÿè®¡ä¿¡æ¯
  const loadStats = async () => {
    try {
      const resp = await fetch('/api/upload/stats')
      if (resp.ok) {
        const statsData = await resp.json()
        setStats(statsData)
      }
    } catch (e) {
      console.error('åŠ è½½ä¸Šä¼ ç»Ÿè®¡å¤±è´¥:', e)
    }
  }

  // å¼€å§‹æ–‡ä»¶ä¸Šä¼ 
  const startUpload = async (file) => {
    try {
      // åˆ›å»ºä¸Šä¼ ä»»åŠ¡
      const createResp = await fetch('/api/upload/start', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          filename: file.name,
          total_size: file.size
        })
      })

      if (!createResp.ok) {
        const error = await createResp.json()
        alert('åˆ›å»ºä¸Šä¼ ä»»åŠ¡å¤±è´¥: ' + error.detail)
        return
      }

      const { task_id } = await createResp.json()

      // ä¸Šä¼ æ–‡ä»¶
      const formData = new FormData()
      formData.append('file', file)

      const uploadResp = await fetch(`/api/upload/${task_id}`, {
        method: 'POST',
        body: formData
      })

      if (uploadResp.ok) {
        const result = await uploadResp.json()
        alert(`æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼\næ–‡ä»¶å: ${file.name}\nå¤§å°: ${file.size} bytes`)
        onUploadComplete && onUploadComplete()
      } else {
        const error = await uploadResp.json()
        alert('ä¸Šä¼ å¤±è´¥: ' + error.detail)
      }

      // åˆ·æ–°ä»»åŠ¡åˆ—è¡¨
      loadUploadTasks()
    } catch (e) {
      console.error('ä¸Šä¼ é”™è¯¯:', e)
      alert('ä¸Šä¼ å¤±è´¥: ' + e.message)
    }
  }

  // æš‚åœä¸Šä¼ 
  const pauseUpload = async (taskId) => {
    try {
      const resp = await fetch(`/api/upload/${taskId}/pause`, {
        method: 'POST'
      })
      if (resp.ok) {
        loadUploadTasks()
      }
    } catch (e) {
      console.error('æš‚åœä¸Šä¼ å¤±è´¥:', e)
    }
  }

  // æ¢å¤ä¸Šä¼ 
  const resumeUpload = async (taskId) => {
    try {
      const resp = await fetch(`/api/upload/${taskId}/resume`, {
        method: 'POST'
      })
      if (resp.ok) {
        loadUploadTasks()
      }
    } catch (e) {
      console.error('æ¢å¤ä¸Šä¼ å¤±è´¥:', e)
    }
  }

  // å–æ¶ˆä¸Šä¼ 
  const cancelUpload = async (taskId) => {
    if (!confirm('ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªä¸Šä¼ ä»»åŠ¡å—ï¼Ÿ')) return

    try {
      const resp = await fetch(`/api/upload/${taskId}/cancel`, {
        method: 'POST'
      })
      if (resp.ok) {
        loadUploadTasks()
      }
    } catch (e) {
      console.error('å–æ¶ˆä¸Šä¼ å¤±è´¥:', e)
    }
  }

  // æ‹–æ‹½å¤„ç†
  const handleDrag = (e) => {
    e.preventDefault()
    e.stopPropagation()
    if (e.type === 'dragenter' || e.type === 'dragover') {
      setDragActive(true)
    } else if (e.type === 'dragleave') {
      setDragActive(false)
    }
  }

  const handleDrop = (e) => {
    e.preventDefault()
    e.stopPropagation()
    setDragActive(false)

    if (e.dataTransfer.files && e.dataTransfer.files[0]) {
      const file = e.dataTransfer.files[0]
      handleFileSelect(file)
    }
  }

  const handleFileSelect = (file) => {
    // æ£€æŸ¥æ–‡ä»¶ç±»å‹
    const allowedTypes = ['.txt', '.md', '.pdf', '.docx', '.doc']
    const fileExt = '.' + file.name.split('.').pop().toLowerCase()

    if (!allowedTypes.includes(fileExt)) {
      alert(`ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ã€‚æ”¯æŒçš„ç±»å‹: ${allowedTypes.join(', ')}`)
      return
    }

    startUpload(file)
  }

  // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
  const formatFileSize = (bytes) => {
    if (bytes === 0) return '0 Bytes'
    const k = 1024
    const sizes = ['Bytes', 'KB', 'MB', 'GB']
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]
  }

  // è·å–çŠ¶æ€é¢œè‰²
  const getStatusColor = (status) => {
    switch (status) {
      case 'completed': return '#28a745'
      case 'uploading': return '#007bff'
      case 'paused': return '#ffc107'
      case 'failed': return '#dc3545'
      case 'cancelled': return '#6c757d'
      default: return '#6c757d'
    }
  }

  // è·å–çŠ¶æ€æ–‡æœ¬
  const getStatusText = (status) => {
    switch (status) {
      case 'pending': return 'ç­‰å¾…ä¸­'
      case 'uploading': return 'ä¸Šä¼ ä¸­'
      case 'paused': return 'å·²æš‚åœ'
      case 'completed': return 'å·²å®Œæˆ'
      case 'failed': return 'å¤±è´¥'
      case 'cancelled': return 'å·²å–æ¶ˆ'
      default: return status
    }
  }

  // å®šæœŸåˆ·æ–°ä¸Šä¼ ä»»åŠ¡
  useEffect(() => {
    if (showManager) {
      loadUploadTasks()
      loadStats()
      const interval = setInterval(() => {
        loadUploadTasks()
      }, 2000)
      return () => clearInterval(interval)
    }
  }, [showManager])

  return (
    <div className="upload-manager">
      <div className="upload-header">
        <h3>ğŸ“¤ æ–‡ä»¶ä¸Šä¼ ç®¡ç†</h3>
        <button
          className="toggle-btn"
          onClick={() => setShowManager(!showManager)}
        >
          {showManager ? 'æ”¶èµ· â–²' : 'å±•å¼€ â–¼'}
        </button>
      </div>

      {showManager && (
        <>
          {/* ç»Ÿè®¡ä¿¡æ¯ */}
          {stats && (
            <div className="upload-stats">
              <div className="stat-item">
                <span className="stat-label">æ€»ä»»åŠ¡:</span>
                <span className="stat-value">{stats.total_tasks}</span>
              </div>
              <div className="stat-item">
                <span className="stat-label">ä¸Šä¼ ä¸­:</span>
                <span className="stat-value" style={{ color: '#007bff' }}>{stats.uploading}</span>
              </div>
              <div className="stat-item">
                <span className="stat-label">å·²å®Œæˆ:</span>
                <span className="stat-value" style={{ color: '#28a745' }}>{stats.completed}</span>
              </div>
            </div>
          )}

          {/* æ–‡ä»¶é€‰æ‹©åŒºåŸŸ */}
          <div
            className={`upload-area ${dragActive ? 'drag-active' : ''}`}
            onDragEnter={handleDrag}
            onDragLeave={handleDrag}
            onDragOver={handleDrag}
            onDrop={handleDrop}
          >
            <input
              type="file"
              id="file-upload-input"
              onChange={(e) => e.target.files[0] && handleFileSelect(e.target.files[0])}
              accept=".txt,.md,.pdf,.docx,.doc"
              style={{ display: 'none' }}
            />
            <label htmlFor="file-upload-input" className="upload-label">
              <div className="upload-icon">ğŸ“</div>
              <p>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>
              <p className="upload-hint">æ”¯æŒ: .txt .md .pdf .docx .doc</p>
            </label>
          </div>

          {/* ä¸Šä¼ ä»»åŠ¡åˆ—è¡¨ */}
          <div className="upload-tasks">
            <h4>ä¸Šä¼ ä»»åŠ¡</h4>
            {uploadTasks.length === 0 ? (
              <div className="empty-tasks">
                <p>ğŸ“‚ æš‚æ— ä¸Šä¼ ä»»åŠ¡</p>
              </div>
            ) : (
              uploadTasks.map(task => (
                <div key={task.id} className="upload-task">
                  <div className="task-info">
                    <div className="task-filename">{task.filename}</div>
                    <div className="task-meta">
                      <span className="task-size">{formatFileSize(task.total_size)}</span>
                      <span
                        className="task-status"
                        style={{ color: getStatusColor(task.status) }}
                      >
                        {getStatusText(task.status)}
                      </span>
                    </div>
                  </div>

                  {/* è¿›åº¦æ¡ */}
                  <div className="progress-container">
                    <div className="progress-bar">
                      <div
                        className="progress-fill"
                        style={{
                          width: `${task.progress}%`,
                          backgroundColor: getStatusColor(task.status)
                        }}
                      />
                    </div>
                    <span className="progress-text">{task.progress.toFixed(1)}%</span>
                  </div>

                  {/* æ§åˆ¶æŒ‰é’® */}
                  <div className="task-controls">
                    {task.status === 'uploading' && (
                      <>
                        <button
                          className="control-btn pause-btn"
                          onClick={() => pauseUpload(task.id)}
                        >
                          â¸ï¸ æš‚åœ
                        </button>
                        <button
                          className="control-btn cancel-btn"
                          onClick={() => cancelUpload(task.id)}
                        >
                          âŒ å–æ¶ˆ
                        </button>
                      </>
                    )}
                    {task.status === 'paused' && (
                      <>
                        <button
                          className="control-btn resume-btn"
                          onClick={() => resumeUpload(task.id)}
                        >
                          â–¶ï¸ æ¢å¤
                        </button>
                        <button
                          className="control-btn cancel-btn"
                          onClick={() => cancelUpload(task.id)}
                        >
                          âŒ å–æ¶ˆ
                        </button>
                      </>
                    )}
                    {task.status === 'failed' && (
                      <span className="error-text">
                        é”™è¯¯: {task.error_message || 'æœªçŸ¥é”™è¯¯'}
                      </span>
                    )}
                  </div>
                </div>
              ))
            )}
          </div>
        </>
      )}

      <style jsx>{`
        .upload-manager {
          background: #f8f9fa;
          border-radius: 8px;
          padding: 16px;
          margin-bottom: 16px;
        }

        .upload-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .upload-header h3 {
          margin: 0;
          color: #333;
        }

        .toggle-btn {
          background: none;
          border: 1px solid #ddd;
          padding: 4px 8px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
        }

        .toggle-btn:hover {
          background: #e9ecef;
        }

        .upload-stats {
          display: flex;
          gap: 16px;
          background: white;
          padding: 12px;
          border-radius: 4px;
          margin-bottom: 16px;
          border: 1px solid #e9ecef;
        }

        .stat-item {
          display: flex;
          gap: 4px;
          font-size: 12px;
        }

        .stat-label {
          color: #666;
        }

        .stat-value {
          font-weight: bold;
        }

        .upload-area {
          border: 2px dashed #ddd;
          border-radius: 8px;
          padding: 32px;
          text-align: center;
          margin-bottom: 16px;
          transition: all 0.2s;
        }

        .upload-area:hover, .upload-area.drag-active {
          border-color: #007bff;
          background: #f8f9ff;
        }

        .upload-label {
          cursor: pointer;
          display: block;
        }

        .upload-icon {
          font-size: 48px;
          margin-bottom: 8px;
        }

        .upload-hint {
          font-size: 12px;
          color: #666;
          margin-top: 4px;
        }

        .upload-tasks h4 {
          margin: 0 0 12px 0;
          color: #333;
        }

        .upload-task {
          background: white;
          border: 1px solid #e9ecef;
          border-radius: 4px;
          padding: 12px;
          margin-bottom: 8px;
        }

        .task-info {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
        }

        .task-filename {
          font-weight: 500;
          font-size: 14px;
        }

        .task-meta {
          display: flex;
          gap: 8px;
          font-size: 12px;
        }

        .task-size {
          color: #666;
        }

        .task-status {
          font-weight: bold;
        }

        .progress-container {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }

        .progress-bar {
          flex: 1;
          height: 6px;
          background: #e9ecef;
          border-radius: 3px;
          overflow: hidden;
        }

        .progress-fill {
          height: 100%;
          transition: width 0.3s ease;
        }

        .progress-text {
          font-size: 12px;
          color: #666;
          min-width: 40px;
        }

        .task-controls {
          display: flex;
          gap: 8px;
        }

        .control-btn {
          background: none;
          border: 1px solid #ddd;
          padding: 4px 8px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
        }

        .pause-btn:hover {
          background: #fff3cd;
          border-color: #ffc107;
        }

        .resume-btn:hover {
          background: #d1ecf1;
          border-color: #007bff;
        }

        .cancel-btn:hover {
          background: #f8d7da;
          border-color: #dc3545;
        }

        .error-text {
          color: #dc3545;
          font-size: 12px;
        }

        .empty-tasks {
          text-align: center;
          padding: 32px;
          color: #666;
        }
      `}</style>
    </div>
  )
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/App.css
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #333;
}

.container {
  display: flex;
  height: 100vh;
  background: rgba(255, 255, 255, 0.95);
  margin: 0;
  border-radius: 0;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
}

/* ä¾§è¾¹æ  */
.sidebar {
  width: 280px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.sidebar h2 {
  font-size: 1.5rem;
  font-weight: 700;
  text-align: center;
  margin-bottom: 1rem;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.nav-buttons {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.nav-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 1rem;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.nav-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.nav-btn.active {
  background: rgba(255, 255, 255, 0.9);
  color: #667eea;
  border-color: white;
}

.sidebar-info {
  background: rgba(255, 255, 255, 0.1);
  padding: 1.5rem;
  border-radius: 12px;
  backdrop-filter: blur(10px);
}

.sidebar-info p {
  margin-bottom: 1rem;
  font-size: 0.9rem;
  opacity: 0.9;
}

.small-text {
  font-size: 0.8rem !important;
  opacity: 0.7 !important;
  margin-bottom: 0 !important;
}

.clear-btn {
  background: rgba(255, 67, 54, 0.8);
  border: none;
  color: white;
  padding: 0.8rem;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.3s ease;
  width: 100%;
}

.clear-btn:hover {
  background: rgba(255, 67, 54, 1);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 67, 54, 0.3);
}

/* ä¸»å†…å®¹åŒº */
.main {
  flex: 1;
  padding: 2rem;
  overflow-y: auto;
  background: white;
}

/* èŠå¤©ç•Œé¢ */
.chat-container {
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.chat {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.welcome-message {
  text-align: center;
  padding: 3rem 1rem;
  color: #6c757d;
}

.welcome-message h3 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  color: #495057;
}

.welcome-message p {
  font-size: 1.1rem;
  opacity: 0.8;
}

.message {
  margin-bottom: 1.5rem;
  display: flex;
  align-items: flex-start;
}

.message.user {
  justify-content: flex-end;
}

.message.assistant {
  justify-content: flex-start;
}

.bubble {
  max-width: 70%;
  padding: 1rem 1.5rem;
  border-radius: 18px;
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  font-size: 0.95rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.message.user .bubble {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-bottom-right-radius: 4px;
}

.message.assistant .bubble {
  background: white;
  color: #333;
  border: 1px solid #e9ecef;
  border-bottom-left-radius: 4px;
}

.bubble.loading {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  color: #6c757d;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.input-area {
  display: flex;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 2px solid #e9ecef;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.input-area input {
  flex: 1;
  padding: 1rem 1.5rem;
  border: 2px solid #e9ecef;
  border-radius: 25px;
  font-size: 1rem;
  outline: none;
  transition: all 0.3s ease;
  background: #f8f9fa;
}

.input-area input:focus {
  border-color: #667eea;
  background: white;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.input-area input:disabled {
  background: #f8f9fa;
  opacity: 0.7;
  cursor: not-allowed;
}

.input-area button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1.2rem;
  transition: all 0.3s ease;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.input-area button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.input-area button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

/* æ–‡ä»¶ç®¡ç†ç•Œé¢ */
.files-container {
  height: 100%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.upload-section, .files-section {
  background: white;
  padding: 2rem;
  border-radius: 12px;
  border: 1px solid #e9ecef;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.upload-section h3, .files-section h3 {
  font-size: 1.3rem;
  margin-bottom: 1.5rem;
  color: #495057;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.upload-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  padding: 2rem;
  border: 2px dashed #dee2e6;
  border-radius: 12px;
  background: #f8f9fa;
  transition: all 0.3s ease;
}

.upload-area:hover {
  border-color: #667eea;
  background: #f0f2ff;
}

.upload-label {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem 2rem;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.upload-label:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.progress-bar {
  width: 100%;
  max-width: 300px;
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #667eea, #764ba2);
  transition: width 0.3s ease;
  border-radius: 4px;
}

.progress-text {
  position: absolute;
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.8rem;
  font-weight: 600;
  color: #667eea;
}

.empty-files {
  text-align: center;
  padding: 3rem;
  color: #6c757d;
}

.empty-files p {
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
}

.files-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.file-card {
  background: white;
  border: 2px solid #e9ecef;
  border-radius: 12px;
  padding: 1.5rem;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.file-card:hover {
  border-color: #667eea;
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
}

.file-info {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.file-icon {
  font-size: 2rem;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8f9fa;
  border-radius: 10px;
}

.file-details {
  flex: 1;
}

.file-name {
  font-size: 1rem;
  font-weight: 600;
  color: #495057;
  margin-bottom: 0.3rem;
  word-break: break-word;
}

.file-size {
  font-size: 0.8rem;
  color: #6c757d;
  margin: 0;
}

.file-actions {
  display: flex;
  gap: 0.5rem;
  justify-content: flex-end;
}

.download-btn, .delete-btn {
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 6px;
  transition: all 0.3s ease;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.download-btn {
  background: #28a745;
  color: white;
}

.download-btn:hover {
  background: #218838;
  transform: scale(1.1);
}

.delete-btn {
  background: #dc3545;
  color: white;
}

.delete-btn:hover {
  background: #c82333;
  transform: scale(1.1);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .container {
    flex-direction: column;
    height: 100vh;
  }

  .sidebar {
    width: 100%;
    padding: 1rem;
    height: auto;
  }

  .nav-buttons {
    flex-direction: row;
    justify-content: center;
  }

  .nav-btn {
    flex: 1;
    padding: 0.8rem;
    font-size: 0.9rem;
  }

  .main {
    padding: 1rem;
    flex: 1;
  }

  .bubble {
    max-width: 85%;
  }

  .files-grid {
    grid-template-columns: 1fr;
  }

  .input-area {
    padding: 1rem;
    flex-direction: column;
    gap: 0.5rem;
  }

  .input-area button {
    align-self: center;
  }
}

/* æ»šåŠ¨æ¡ç¾åŒ– */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/src/styles.css
* {
  box-sizing: border-box;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}

body, html, #root {
  height: 100%;
  margin: 0;
  background: #f8fafc;
}

.container {
  display: flex;
  height: 100vh;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
}

/* ä¾§è¾¹æ æ ·å¼ */
.sidebar {
  width: 260px;
  padding: 20px;
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
  color: #fff;
  display: flex;
  flex-direction: column;
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
}

.sidebar h2 {
  margin: 0 0 24px 0;
  font-size: 20px;
  font-weight: 600;
  text-align: center;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.nav-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 24px;
}

.nav-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #fff;
  padding: 12px 16px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
  font-weight: 500;
}

.nav-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
}

.nav-btn.active {
  background: #0ea5a6;
  border-color: #0ea5a6;
  box-shadow: 0 4px 12px rgba(14, 165, 166, 0.3);
}

.sidebar-info {
  margin-top: auto;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-info p {
  margin: 0 0 12px 0;
  font-size: 14px;
  opacity: 0.9;
}

.small-text {
  font-size: 12px !important;
  opacity: 0.7 !important;
}

.clear-btn {
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.3s ease;
  width: 100%;
}

.clear-btn:hover {
  background: rgba(239, 68, 68, 0.3);
}

/* ä¸»å†…å®¹åŒºåŸŸ */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: #fff;
  overflow: hidden;
}

/* èŠå¤©ç•Œé¢æ ·å¼ */
.chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.chat {
  flex: 1;
  overflow: auto;
  padding: 20px;
  scroll-behavior: smooth;
}

.welcome-message {
  text-align: center;
  padding: 40px 20px;
  color: #64748b;
}

.welcome-message h3 {
  margin: 0 0 12px 0;
  color: #334155;
  font-size: 24px;
}

.welcome-message p {
  margin: 0;
  font-size: 16px;
}

.message {
  margin: 12px 0;
  display: flex;
  align-items: flex-start;
}

.message.user {
  justify-content: flex-end;
}

.message.assistant {
  justify-content: flex-start;
}

.bubble {
  max-width: 70%;
  padding: 14px 18px;
  border-radius: 16px;
  background: #f1f5f9;
  border: 1px solid #e2e8f0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  font-size: 14px;
  line-height: 1.5;
}

.message.user .bubble {
  background: linear-gradient(135deg, #0ea5a6 0%, #0d9488 100%);
  color: white;
  border: none;
}

.message.assistant .bubble {
  background: #fff;
  border: 1px solid #e2e8f0;
}

.bubble pre {
  margin: 0;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* åŠ è½½åŠ¨ç”» */
.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 40px;
}

.loading-dots {
  display: flex;
  gap: 4px;
}

.loading-dots span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #94a3b8;
  animation: loading-bounce 1.4s ease-in-out infinite both;
}

.loading-dots span:nth-child(1) { animation-delay: -0.32s; }
.loading-dots span:nth-child(2) { animation-delay: -0.16s; }

@keyframes loading-bounce {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* è¾“å…¥åŒºåŸŸ */
.composer {
  display: flex;
  gap: 12px;
  padding: 20px;
  background: #f8fafc;
  border-top: 1px solid #e2e8f0;
}

.composer input {
  flex: 1;
  padding: 14px 16px;
  border-radius: 12px;
  border: 1px solid #d1d5db;
  background: #fff;
  font-size: 14px;
  transition: all 0.3s ease;
}

.composer input:focus {
  outline: none;
  border-color: #0ea5a6;
  box-shadow: 0 0 0 3px rgba(14, 165, 166, 0.1);
}

.composer button {
  padding: 14px 24px;
  border-radius: 12px;
  border: none;
  background: linear-gradient(135deg, #0ea5a6 0%, #0d9488 100%);
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(14, 165, 166, 0.3);
}

.composer button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(14, 165, 166, 0.4);
}

.composer button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* æ–‡ä»¶ç®¡ç†ç•Œé¢ */
.files-container {
  padding: 20px;
  height: 100%;
  overflow: auto;
}

.files-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e2e8f0;
}

.files-header h3 {
  margin: 0;
  color: #1e293b;
  font-size: 20px;
}

.upload-section {
  display: flex;
  align-items: center;
}

.upload-btn {
  background: linear-gradient(135deg, #0ea5a6 0%, #0d9488 100%);
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  border: none;
  font-weight: 500;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(14, 165, 166, 0.3);
}

.upload-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(14, 165, 166, 0.4);
}

.upload-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* è¿›åº¦æ¡ */
.progress-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
  padding: 16px;
  background: #f8fafc;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}

.progress-bar {
  flex: 1;
  height: 8px;
  background: #e2e8f0;
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #0ea5a6, #0d9488);
  transition: width 0.3s ease;
  border-radius: 4px;
}

.progress-text {
  font-size: 12px;
  color: #64748b;
  font-weight: 500;
  min-width: 40px;
}

/* æ–‡ä»¶åˆ—è¡¨ */
.files-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.empty-files {
  text-align: center;
  padding: 60px 20px;
  color: #64748b;
}

.empty-files p {
  margin: 8px 0;
  font-size: 16px;
}

.file-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.file-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-color: #cbd5e1;
}

.file-info {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
}

.file-name {
  font-weight: 500;
  color: #1e293b;
  font-size: 14px;
}

.file-size {
  color: #64748b;
  font-size: 12px;
  background: #f1f5f9;
  padding: 2px 8px;
  border-radius: 4px;
}

.file-type {
  color: #0ea5a6;
  font-size: 10px;
  font-weight: 600;
  background: rgba(14, 165, 166, 0.1);
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
}

.file-actions {
  display: flex;
  gap: 8px;
}

.action-btn {
  padding: 8px 12px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.download-btn {
  background: rgba(59, 130, 246, 0.1);
  color: #3b82f6;
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.download-btn:hover {
  background: rgba(59, 130, 246, 0.2);
  transform: translateY(-1px);
}

.delete-btn {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
  border: 1px solid rgba(239, 68, 68, 0.2);
}

.delete-btn:hover {
  background: rgba(239, 68, 68, 0.2);
  transform: translateY(-1px);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .sidebar {
    width: 200px;
    padding: 16px;
  }

  .main {
    padding: 12px;
  }

  .chat {
    padding: 12px;
  }

  .composer {
    padding: 12px;
  }

  .bubble {
    max-width: 85%;
  }

  .file-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .file-actions {
    width: 100%;
    justify-content: flex-end;
  }
}

## File: /home/liaozhenhao/liao-warehouse/deepseek_rag_project/frontend/vite.config.js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
        secure: false,
      }
    }
  }
})

---
*Frontend code collection completed. All files have been organized with their absolute paths.*